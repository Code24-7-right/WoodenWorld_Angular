<div class="container">  
<br><br>
<button class="btn btn-primary btn-lg" (click)="openAddProductModal()">Click here to Add Product</button>    
<br><br>
<h2>Displaying Products</h2>
    <table class="table table-striped table-hover table-dark">
        <thead>
            <tr>
                <th>Id</th>
                <th>Name</th>    
                <th>Image src</th>
                <th>Price</th>
                <th>Description</th>
                <th>Product Category ID</th>
                <th>Actions</th>    
            </tr>
        </thead>
        <tbody>
            <tr *ngFor = "let product of products">
                <td>{{ product.pid }}</td>
                <td>{{ product.pname }}</td>
                <td>{{ product.pimg }}</td>
                <td>{{ product.pprice }}</td>
                <td>{{ product.pdesc }}</td>
                <td>{{ product.pcid }}</td>
                <td><button class="btn btn-success btn-md mb-3" (click)="openUpdateProductModal()"  (click)="sendCurrentProductData(product)">Update Product</button><br>
                    <button class="btn btn-danger" (click) = "deleteproduct(product.pid)" >Delete Product</button><br><br>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<br><br>
<div class="modal" tabindex="-1" role="dialog"  [ngStyle]="{'display':displaystyle}">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Update Product</h3>
            </div>
            <div class="modal-body">
                <div class="updateproductform">
                    <div class="content">
                    <div class="container-fluid">
                        <h4>Enter details of product to update</h4>
                        <form #updateproductform = "ngForm" (ngSubmit) = "updateproduct()">
                            <div *ngIf="pname.errors?.['required'] && pname.touched">Please enter product name</div>
                            <div *ngIf="pname.errors?.['minlength'] && pname.touched">Please enter atleast 5 characters</div>
                            Name:<input type = "text" ngModel name ="pname" #pname = "ngModel" [(ngModel)] = "product.pname" required minlength="3" maxlength="30" placeholder="Enter product name"><br><br>
                        
                            <div *ngIf="pimg.errors?.['required'] && pimg.touched">Please enter image path</div>
                            <div *ngIf="pimg.errors?.['minlength'] && pimg.touched">Please enter atleast 5 characters</div>
                            Image Path:<input type = "text" ngModel name ="pimg" #pimg = "ngModel" [(ngModel)] = "product.pimg" required minlength="5" maxlength="125" size="30" placeholder="Enter image path"><br><br>
                        
                            <div *ngIf="pprice.errors?.['required'] && pprice.touched">Please enter product price</div>
                            <div *ngIf="pprice.errors?.['minlength'] && pprice.touched">Please enter atleast 4 digits</div>
                            Price:<input type = "number" ngModel name ="pprice" #pprice = "ngModel" [(ngModel)] = "product.pprice" required minlength="4" maxlength="7" placeholder="Enter product price" size="40"><br><br>
                        
                            <div *ngIf="pdesc.errors?.['required'] && pdesc.touched">Please enter product Description</div>
                            <div *ngIf="pdesc.errors?.['minlength'] && pdesc.touched">Please enter atleast 5 characters</div>
                            Description:<input type = "text" ngModel name ="pdesc" #pdesc = "ngModel" [(ngModel)] = "product.pdesc" required minlength="5" maxlength="125" size="50" width="20" placeholder="Enter product Description"><br><br>
                        
                            <div *ngIf="pcid.errors?.['required'] && pcid.touched">Please enter product Category ID</div>
                            <div *ngIf="pcid.errors?.['minlength'] && pcid.touched">Please enter atleast 1 digit</div>
                            Product Category:<input type = "number" ngModel name ="pcid" #pcid = "ngModel" [(ngModel)] = "product.pcid" required minlength="1" maxlength="3" placeholder="Enter product Category ID" style="size: 150px;"><br><br>
                            <input type="submit" value="Update Product">
                        </form>
                    </div>
                    </div>
                </div>
            </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="closeUpdateProductModal()">Close</button>
        </div>
        </div>
    </div>
</div>
<div class="modal" tabindex="-1" role="dialog"  [ngStyle]="{'display':AddModal}">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add Product</h3>
            </div>
            <div class="modal-body">
                <div class="addproductform">
                    <div class="content">
                    <div class="container-fluid">
                        <h2>Enter details of product to add</h2>
                        <form #addproductform = "ngForm" (ngSubmit) = "addproduct(addproductform.value)">
                            <div *ngIf="pname.errors?.['required'] && pname.touched">Please enter product name</div>
                            <div *ngIf="pname.errors?.['minlength'] && pname.touched">Please enter atleast 5 characters</div>
                            Name:<input type = "text" ngModel name ="pname" #pname = "ngModel" required minlength="3" maxlength="30" placeholder="Enter product name"><br><br>
                        
                            <div *ngIf="pimg.errors?.['required'] && pimg.touched">Please enter image path</div>
                            <div *ngIf="pimg.errors?.['minlength'] && pimg.touched">Please enter atleast 5 characters</div>
                            Image Path:<input type = "text" ngModel name ="pimg" #pimg = "ngModel" required minlength="5" maxlength="125" size="30" placeholder="Enter image path"><br><br>
                        
                            <div *ngIf="pprice.errors?.['required'] && pprice.touched">Please enter product price</div>
                            <div *ngIf="pprice.errors?.['minlength'] && pprice.touched">Please enter atleast 4 digits</div>
                            Price:<input type = "number" ngModel name ="pprice" #pprice = "ngModel" required minlength="4" maxlength="7" placeholder="Enter product price" size="40"><br><br>
                        
                            <div *ngIf="pdesc.errors?.['required'] && pdesc.touched">Please enter product Description</div>
                            <div *ngIf="pdesc.errors?.['minlength'] && pdesc.touched">Please enter atleast 5 characters</div>
                            Description:<input type = "text" ngModel name ="pdesc" #pdesc = "ngModel" required minlength="5" maxlength="125" size="50" width="20" placeholder="Enter product Description"><br><br>
                        
                            <div *ngIf="pcid.errors?.['required'] && pcid.touched">Please enter product Category ID</div>
                            <div *ngIf="pcid.errors?.['minlength'] && pcid.touched">Please enter atleast 1 digit</div>
                            Product Category:<input type = "number" ngModel name ="pcid" #pcid = "ngModel" required minlength="1" maxlength="3" placeholder="Enter product Category ID" style="size: 150px;"><br><br>
                            <input type="submit" value="Add Product">
                        </form>
                    </div>
                </div>
                </div>
            </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="closeAddProductModal()">Close</button>
        </div>
        </div>
    </div>
</div>
<router-outlet></router-outlet>
